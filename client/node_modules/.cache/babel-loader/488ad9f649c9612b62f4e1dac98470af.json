{"ast":null,"code":"import _defineProperty from \"C:\\\\Users\\\\anton\\\\Desktop\\\\InvoiceGen\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"C:\\\\Users\\\\anton\\\\Desktop\\\\InvoiceGen\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\anton\\\\Desktop\\\\InvoiceGen\\\\client\\\\src\\\\comp\\\\invoice\\\\comp\\\\creater.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState } from 'react';\nimport { connect } from 'react-redux';\nimport InvoiceContainer from './invoiceContainer.js';\nimport axios from 'axios';\nimport { saveAs } from 'file-saver'; //import PropTypes from \"prop-types\";\n\nconst Creater = () => {\n  const _useState = useState({\n    order_id: '',\n    items: [],\n    invoice_id: '',\n    currency: '',\n    data: [],\n    loaded: false\n  }),\n        _useState2 = _slicedToArray(_useState, 2),\n        state = _useState2[0],\n        setState = _useState2[1];\n\n  const order_id = state.order_id;\n\n  const onChange = async e => {\n    setState(_objectSpread({}, state, {\n      [e.target.name]: e.target.value\n    }));\n  };\n\n  const onSubmit = async e => {\n    e.preventDefault();\n    let res = await axios.get(\"http://tools.raminternet.com/devotion/api/getProformaInfo/?id=\".concat(order_id, \"&token=n9VTU1yvRomDHZOBfTt0aKEMlSmzO9Na\"));\n    res = res.data;\n\n    if (res.status == 'success') {\n      console.log(res.data.items);\n      let items = await res.data.items.map(item => _objectSpread({}, item, {\n        'invoice_id': res.data.invoice_id,\n        'amount': item.amount.replace(',', '')\n      }));\n      console.log(items);\n      await setState(_objectSpread({}, state, {\n        loaded: true,\n        invoice_id: res.data.invoice_id,\n        currency: res.data.currency,\n        issue_date: res.data.issue_date,\n        customer_address: res.data.customer_address,\n        delivery_address: res.data.delivery_address,\n        payment_reference: res.data.payment_reference,\n        items: items\n      }));\n    }\n  };\n\n  const onSave = () => {\n    let body = {\n      invoice_id: state.invoice_id,\n      order_id: state.order_id,\n      currency: state.currency,\n      issue_date: state.issue_date,\n      customer_address: state.customer_address,\n      delivery_address: state.delivery_address,\n      payment_reference: state.payment_reference,\n      items: state.items\n    };\n    axios.post('/api/invoice', body);\n  };\n\n  const onSaveAndDownload = async () => {\n    let body = {\n      invoice_id: state.invoice_id,\n      order_id: state.order_id,\n      currency: state.currency,\n      issue_date: state.issue_date,\n      customer_address: state.customer_address,\n      delivery_address: state.delivery_address,\n      payment_reference: state.payment_reference,\n      items: state.items\n    };\n    await axios.post('/api/invoice/', body);\n    console.log(state.invoice_id);\n    await axios.get('/api/invoice/pdf/' + state.invoice_id, {\n      responseType: 'arraybuffer',\n      headers: {\n        Accept: 'application/pdf'\n      }\n    }).then(res => {\n      const blob = new Blob([res.data], {\n        type: 'application/pdf'\n      });\n      saveAs(blob, \"devotion_proforma_\".concat(order_id, \".pdf\"));\n    });\n  };\n\n  return React.createElement(\"div\", {\n    className: \"creator-container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"creator-title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88\n    },\n    __self: this\n  }, \"Create Invoice\"), React.createElement(\"div\", {\n    className: \"order-input\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89\n    },\n    __self: this\n  }, React.createElement(\"form\", {\n    className: \"creater-form\",\n    onSubmit: e => onSubmit(e),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"input-container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    className: \"label\",\n    for: \"order_id\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92\n    },\n    __self: this\n  }, \"Order ID\"), React.createElement(\"input\", {\n    type: \"text\",\n    className: \"input creator-input\",\n    name: \"order_id\",\n    id: \"order_id\",\n    value: order_id,\n    onChange: e => onChange(e),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93\n    },\n    __self: this\n  }), React.createElement(\"input\", {\n    type: \"submit\",\n    className: \"input btn btn-creator\",\n    value: \"Get\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101\n    },\n    __self: this\n  })))), React.createElement(\"div\", {\n    className: \"invoice-container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105\n    },\n    __self: this\n  }, React.createElement(InvoiceContainer, {\n    loading: state.loaded,\n    invoice_id: state.invoice_id,\n    currency: state.currency,\n    issue_date: state.issue_date,\n    customer_address: state.customer_address,\n    delivery_address: state.delivery_address,\n    payment_reference: state.payment_reference,\n    onChange: onChange,\n    onSave: onSave,\n    onSaveAndDownload: onSaveAndDownload,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106\n    },\n    __self: this\n  })));\n};\n\nCreater.prototype = {}; //const mapStateToProps = state => ({});\n\nexport default connect()(Creater);","map":{"version":3,"sources":["C:\\Users\\anton\\Desktop\\InvoiceGen\\client\\src\\comp\\invoice\\comp\\creater.js"],"names":["React","useState","connect","InvoiceContainer","axios","saveAs","Creater","order_id","items","invoice_id","currency","data","loaded","state","setState","onChange","e","target","name","value","onSubmit","preventDefault","res","get","status","console","log","map","item","amount","replace","issue_date","customer_address","delivery_address","payment_reference","onSave","body","post","onSaveAndDownload","responseType","headers","Accept","then","blob","Blob","type","prototype"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport InvoiceContainer from './invoiceContainer.js';\r\nimport axios from 'axios';\r\nimport { saveAs } from 'file-saver';\r\n//import PropTypes from \"prop-types\";\r\n\r\nconst Creater = () => {\r\n\tconst [state, setState] = useState({\r\n\t\torder_id: '',\r\n\t\titems: [],\r\n\t\tinvoice_id: '',\r\n\t\tcurrency: '',\r\n\t\tdata: [],\r\n\t\tloaded: false\r\n\t});\r\n\r\n\tconst { order_id } = state;\r\n\r\n\tconst onChange = async e => {\r\n\t\tsetState({ ...state, [e.target.name]: e.target.value });\r\n\t};\r\n\r\n\tconst onSubmit = async e => {\r\n\t\te.preventDefault();\r\n\t\tlet res = await axios.get(\r\n\t\t\t`http://tools.raminternet.com/devotion/api/getProformaInfo/?id=${order_id}&token=n9VTU1yvRomDHZOBfTt0aKEMlSmzO9Na`\r\n\t\t)\r\n\t\tres = res.data;\r\n\t\tif (res.status == 'success') {\r\n\t\t\tconsole.log(res.data.items)\r\n\t\t\tlet items = await res.data.items.map(item => ({ ...item, 'invoice_id': res.data.invoice_id, 'amount': item.amount.replace(',', '') }));\r\n\t\t\tconsole.log(items)\r\n\t\t\tawait setState({\r\n\t\t\t\t...state,\r\n\t\t\t\tloaded: true,\r\n\t\t\t\tinvoice_id: res.data.invoice_id,\r\n\t\t\t\tcurrency: res.data.currency,\r\n\t\t\t\tissue_date: res.data.issue_date,\r\n\t\t\t\tcustomer_address: res.data.customer_address,\r\n\t\t\t\tdelivery_address: res.data.delivery_address,\r\n\t\t\t\tpayment_reference: res.data.payment_reference,\r\n\t\t\t\titems: items\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\tconst onSave = () => {\r\n\t\tlet body = {\r\n\t\t\tinvoice_id: state.invoice_id,\r\n\t\t\torder_id: state.order_id,\r\n\t\t\tcurrency: state.currency,\r\n\t\t\tissue_date: state.issue_date,\r\n\t\t\tcustomer_address: state.customer_address,\r\n\t\t\tdelivery_address: state.delivery_address,\r\n\t\t\tpayment_reference: state.payment_reference,\r\n\t\t\titems: state.items\r\n\t\t};\r\n\t\taxios.post('/api/invoice', body);\r\n\t};\r\n\r\n\tconst onSaveAndDownload = async () => {\r\n\t\tlet body = {\r\n\t\t\tinvoice_id: state.invoice_id,\r\n\t\t\torder_id: state.order_id,\r\n\t\t\tcurrency: state.currency,\r\n\t\t\tissue_date: state.issue_date,\r\n\t\t\tcustomer_address: state.customer_address,\r\n\t\t\tdelivery_address: state.delivery_address,\r\n\t\t\tpayment_reference: state.payment_reference,\r\n\t\t\titems: state.items\r\n\t\t};\r\n\t\tawait axios.post('/api/invoice/', body);\r\n\t\tconsole.log(state.invoice_id)\r\n\t\tawait axios\r\n\t\t\t.get('/api/invoice/pdf/' + state.invoice_id, {\r\n\t\t\t\tresponseType: 'arraybuffer',\r\n\t\t\t\theaders: { Accept: 'application/pdf' }\r\n\t\t\t})\r\n\t\t\t.then(res => {\r\n\t\t\t\tconst blob = new Blob([res.data], { type: 'application/pdf' });\r\n\t\t\t\tsaveAs(blob, `devotion_proforma_${order_id}.pdf`);\r\n\t\t\t});\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div className='creator-container'>\r\n\t\t\t<div className='creator-title'>Create Invoice</div>\r\n\t\t\t<div className='order-input'>\r\n\t\t\t\t<form className='creater-form' onSubmit={e => onSubmit(e)}>\r\n\t\t\t\t<div className='input-container'>\r\n\t\t\t\t<label className='label' for='order_id'>Order ID</label>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\tclassName='input creator-input'\r\n\t\t\t\t\t\tname='order_id'\r\n\t\t\t\t\t\tid='order_id'\r\n\t\t\t\t\t\tvalue={order_id}\r\n\t\t\t\t\t\tonChange={e => onChange(e)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<input type='submit' className='input btn btn-creator' value='Get' />\r\n\t\t\t\t</div>\r\n\t\t\t\t</form>\r\n\t\t\t</div>\r\n\t\t\t<div className='invoice-container'>\r\n\t\t\t\t<InvoiceContainer\r\n\t\t\t\t\tloading={state.loaded}\r\n\t\t\t\t\tinvoice_id={state.invoice_id}\r\n\t\t\t\t\tcurrency={state.currency}\r\n\t\t\t\t\tissue_date={state.issue_date}\r\n\t\t\t\t\tcustomer_address={state.customer_address}\r\n\t\t\t\t\tdelivery_address={state.delivery_address}\r\n\t\t\t\t\tpayment_reference={state.payment_reference}\r\n\t\t\t\t\tonChange={onChange}\r\n\t\t\t\t\tonSave={onSave}\r\n\t\t\t\t\tonSaveAndDownload={onSaveAndDownload}\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\nCreater.prototype = {};\r\n\r\n//const mapStateToProps = state => ({});\r\n\r\nexport default connect()(Creater);\r\n"]},"metadata":{},"sourceType":"module"}