{"ast":null,"code":"import _defineProperty from \"C:\\\\Users\\\\anton\\\\Desktop\\\\InvoiceGen\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"C:\\\\Users\\\\anton\\\\Desktop\\\\InvoiceGen\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\anton\\\\Desktop\\\\InvoiceGen\\\\client\\\\src\\\\comp\\\\invoice\\\\comp\\\\editor.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, Fragment } from 'react';\nimport { connect } from 'react-redux';\nimport InvoiceContainer from './invoiceContainer.js';\nimport axios from 'axios';\nimport { saveAs } from 'file-saver';\n\nconst Editor = props => {\n  const _useState = useState({\n    order_id: '',\n    items: [],\n    invoice_id: '',\n    currency: '',\n    data: [],\n    loaded: false,\n    loading: true\n  }),\n        _useState2 = _slicedToArray(_useState, 2),\n        state = _useState2[0],\n        setState = _useState2[1];\n\n  const order_id = state.order_id;\n\n  const onChange = async e => {\n    setState(_objectSpread({}, state, {\n      [e.target.name]: e.target.value\n    }));\n  };\n\n  const loader = () => {\n    let id = props.match.params.id;\n    axios.get(\"/api/invoice/\".concat(id)).then(res => {\n      setState(_objectSpread({}, state, {\n        loading: false,\n        loaded: true,\n        order_id: res.data.order.id,\n        invoice_id: res.data.invoice_id,\n        currency: res.data.currency,\n        issue_date: res.data.issue_date,\n        customer_address: res.data.customer_address,\n        delivery_address: res.data.delivery_address,\n        payment_reference: res.data.payment_reference\n      }));\n    });\n  };\n\n  const onSave = () => {\n    let body = {\n      invoice_id: state.invoice_id,\n      order_id: state.order_id,\n      currency: state.currency,\n      issue_date: state.issue_date,\n      customer_address: state.customer_address,\n      delivery_address: state.delivery_address,\n      payment_reference: state.payment_reference\n    };\n    axios.put(\"/api/invoice/\".concat(state.invoice_id), body);\n  };\n\n  const onSaveAndDownload = async () => {\n    let body = {\n      invoice_id: state.invoice_id,\n      order_id: state.order_id,\n      currency: state.currency,\n      issue_date: state.issue_date,\n      customer_address: state.customer_address,\n      delivery_address: state.delivery_address,\n      payment_reference: state.payment_reference,\n      items: state.items\n    };\n    await axios.put(\"/api/invoice/\".concat(state.invoice_id), body);\n    await axios.get('/api/invoice/pdf/' + state.invoice_id, {\n      responseType: 'arraybuffer',\n      headers: {\n        Accept: 'application/pdf'\n      }\n    }).then(res => {\n      const blob = new Blob([res.data], {\n        type: 'application/pdf'\n      });\n      saveAs(blob, \"pdf\".concat(state.order_id, \".pdf\"));\n    });\n  };\n\n  return React.createElement(\"div\", {\n    className: \"creater-container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"creator-title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82\n    },\n    __self: this\n  }, \"Editor\"), React.createElement(Fragment, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84\n    },\n    __self: this\n  }, state.loading ? React.createElement(Fragment, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  }, React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87\n    },\n    __self: this\n  }, loader(), \"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430...\")) : React.createElement(Fragment, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94\n    },\n    __self: this\n  }, React.createElement(InvoiceContainer, {\n    loading: state.loaded,\n    invoice_id: state.invoice_id,\n    currency: state.currency,\n    issue_date: state.issue_date,\n    customer_address: state.customer_address,\n    delivery_address: state.delivery_address,\n    payment_reference: state.payment_reference,\n    onChange: onChange,\n    onSave: onSave,\n    onSaveAndDownload: onSaveAndDownload,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95\n    },\n    __self: this\n  })))));\n};\n\nEditor.prototype = {};\nexport default connect()(Editor);","map":{"version":3,"sources":["C:\\Users\\anton\\Desktop\\InvoiceGen\\client\\src\\comp\\invoice\\comp\\editor.js"],"names":["React","useState","Fragment","connect","InvoiceContainer","axios","saveAs","Editor","props","order_id","items","invoice_id","currency","data","loaded","loading","state","setState","onChange","e","target","name","value","loader","id","match","params","get","then","res","order","issue_date","customer_address","delivery_address","payment_reference","onSave","body","put","onSaveAndDownload","responseType","headers","Accept","blob","Blob","type","prototype"],"mappings":"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","sourcesContent":["import React, { useState, Fragment } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport InvoiceContainer from './invoiceContainer.js';\r\nimport axios from 'axios';\r\nimport { saveAs } from 'file-saver';\r\n\r\nconst Editor = props => {\r\n\tconst [state, setState] = useState({\r\n\t\torder_id: '',\r\n\t\titems: [],\r\n\t\tinvoice_id: '',\r\n\t\tcurrency: '',\r\n\t\tdata: [],\r\n\t\tloaded: false,\r\n\t\tloading: true,\r\n\t});\r\n\r\n\tconst { order_id } = state;\r\n\r\n\r\n\tconst onChange = async e => {\r\n\t\tsetState({ ...state, [e.target.name]: e.target.value });\r\n\t};\r\n\r\n\tconst loader = () => {\r\n\t\tlet id = props.match.params.id;\r\n\t\taxios.get(`/api/invoice/${id}`).then(res => {\r\n\t\t\t\r\n\t\t\tsetState({\r\n\t\t\t\t...state,\r\n\t\t\t\tloading: false,\r\n\t\t\t\tloaded: true,\r\n\t\t\t\torder_id: res.data.order.id,\r\n\t\t\t\tinvoice_id: res.data.invoice_id,\r\n\t\t\t\tcurrency: res.data.currency,\r\n\t\t\t\tissue_date: res.data.issue_date,\r\n\t\t\t\tcustomer_address: res.data.customer_address,\r\n\t\t\t\tdelivery_address: res.data.delivery_address,\r\n\t\t\t\tpayment_reference: res.data.payment_reference\r\n\t\t\t});\r\n\t\t});\r\n\t};\r\n\r\n\tconst onSave = () => {\r\n\t\tlet body = {\r\n\t\t\tinvoice_id: state.invoice_id,\r\n\t\t\torder_id: state.order_id,\r\n\t\t\tcurrency: state.currency,\r\n\t\t\tissue_date: state.issue_date,\r\n\t\t\tcustomer_address: state.customer_address,\r\n\t\t\tdelivery_address: state.delivery_address,\r\n\t\t\tpayment_reference: state.payment_reference\r\n\t\t};\r\n\t\taxios.put(`/api/invoice/${state.invoice_id}`, body);\r\n\t};\r\n\r\n\tconst onSaveAndDownload = async () => {\r\n\t\tlet body = {\r\n\t\t\tinvoice_id: state.invoice_id,\r\n\t\t\torder_id: state.order_id,\r\n\t\t\tcurrency: state.currency,\r\n\t\t\tissue_date: state.issue_date,\r\n\t\t\tcustomer_address: state.customer_address,\r\n\t\t\tdelivery_address: state.delivery_address,\r\n\t\t\tpayment_reference: state.payment_reference,\r\n\t\t\titems: state.items\r\n\t\t};\r\n\t\tawait axios.put(`/api/invoice/${state.invoice_id}`, body);\r\n\t\tawait axios\r\n\t\t\t.get('/api/invoice/pdf/' + state.invoice_id, {\r\n\t\t\t\tresponseType: 'arraybuffer',\r\n\t\t\t\theaders: { Accept: 'application/pdf' }\r\n\t\t\t})\r\n\t\t\t.then(res => {\r\n\t\t\t\tconst blob = new Blob([res.data], { type: 'application/pdf' });\r\n\t\t\t\tsaveAs(blob, `pdf${state.order_id}.pdf`);\r\n\t\t\t});\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div className='creater-container'>\r\n\t\t<div className='creator-title'>Editor</div>\r\n\t\t\t\r\n\t\t\t<Fragment>\r\n\t\t\t\t{state.loading ? (\r\n\t\t\t\t\t<Fragment>\r\n\t\t\t\t\t<p>\r\n\t\t\t\t\t{loader()}\r\n\t\t\t\t\t\tЗагрузка...\r\n\t\t\t\t\t</p>\r\n\t\t\t\t\t</Fragment>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<Fragment>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<InvoiceContainer\r\n\t\t\t\t\tloading={state.loaded}\r\n\t\t\t\t\tinvoice_id={state.invoice_id}\r\n\t\t\t\t\tcurrency={state.currency}\r\n\t\t\t\t\tissue_date={state.issue_date}\r\n\t\t\t\t\tcustomer_address={state.customer_address}\r\n\t\t\t\t\tdelivery_address={state.delivery_address}\r\n\t\t\t\t\tpayment_reference={state.payment_reference}\r\n\t\t\t\t\tonChange={onChange}\r\n\t\t\t\t\tonSave={onSave}\r\n\t\t\t\t\tonSaveAndDownload={onSaveAndDownload}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</Fragment>\r\n\t\t\t\t)}\r\n\t\t\t</Fragment>\r\n\t\t</div>\r\n\t);\r\n};\r\nEditor.prototype = {};\r\n\r\nexport default connect()(Editor);\r\n"]},"metadata":{},"sourceType":"module"}