{"ast":null,"code":"import _defineProperty from \"C:\\\\Users\\\\anton\\\\Desktop\\\\InvoiceGen\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"C:\\\\Users\\\\anton\\\\Desktop\\\\InvoiceGen\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\anton\\\\Desktop\\\\InvoiceGen\\\\client\\\\src\\\\comp\\\\invoice\\\\comp\\\\table.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, Fragment } from 'react';\nimport { connect } from 'react-redux';\nimport { Redirect, Link } from 'react-router-dom';\nimport Moment from 'react-moment';\nimport axios from 'axios';\nimport { saveAs } from 'file-saver';\n\nconst Table = () => {\n  const _useState = useState({\n    invoices: [],\n    loading: true,\n    redirect: false,\n    focus: ''\n  }),\n        _useState2 = _slicedToArray(_useState, 2),\n        state = _useState2[0],\n        setState = _useState2[1];\n\n  const InvoiceTable = () => {\n    axios.get('/api/invoice').then(res => {\n      setState(_objectSpread({}, state, {\n        invoices: res.data,\n        loading: false\n      }));\n    });\n  };\n\n  const editorTable = invoice_id => {\n    setState(_objectSpread({}, state, {\n      redirect: true,\n      focus: invoice_id\n    }));\n  };\n\n  const renderRedirect = () => {\n    if (state.redirect) return React.createElement(Redirect, {\n      to: \"/invoice/editor/\".concat(state.focus),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 26\n      },\n      __self: this\n    });\n  };\n\n  const deleteTable = invoice_id => {\n    axios.delete(\"/api/invoice/\".concat(invoice_id));\n  };\n\n  const downloadTable = (invoice_id, order_id) => {\n    axios.get('/api/invoice/pdf/' + invoice_id, {\n      responseType: 'arraybuffer',\n      headers: {\n        Accept: 'application/pdf'\n      }\n    }).then(res => {\n      const blob = new Blob([res.data], {\n        type: 'application/pdf'\n      });\n      saveAs(blob, \"devotion_proforma_\".concat(order_id, \".pdf\"));\n    });\n  };\n\n  return React.createElement(\"div\", {\n    className: \"table-container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44\n    },\n    __self: this\n  }, InvoiceTable(), renderRedirect(), React.createElement(Fragment, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47\n    },\n    __self: this\n  }, state.loading ? React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49\n    },\n    __self: this\n  }, \"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430...\") : React.createElement(Fragment, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"outsider\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"invoice-panel-title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53\n    },\n    __self: this\n  }, \"Invoice panel\"), React.createElement(Link, {\n    to: \"/creater\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"btn btn-create\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54\n    },\n    __self: this\n  }, \"Create an invoice\"))), React.createElement(\"div\", {\n    className: \"table-header\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"table-col-name\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57\n    },\n    __self: this\n  }, \"Invoice id\"), React.createElement(\"div\", {\n    className: \"table-col-name\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58\n    },\n    __self: this\n  }, \"Order id\"), React.createElement(\"div\", {\n    className: \"table-col-name\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59\n    },\n    __self: this\n  }, \"Date\")), state.invoices.map(item => React.createElement(\"div\", {\n    className: \"table-item\",\n    key: item._id,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"table-col\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64\n    },\n    __self: this\n  }, item.invoice_id), React.createElement(\"div\", {\n    className: \"table-col\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65\n    },\n    __self: this\n  }, item.order_id), React.createElement(\"div\", {\n    className: \"table-col\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66\n    },\n    __self: this\n  }, React.createElement(Moment, {\n    format: \"DD.MM.YY \",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67\n    },\n    __self: this\n  }, item.created_at)), React.createElement(\"div\", {\n    className: \"btn table-btn delete-btn\",\n    onClick: () => deleteTable(item.invoice_id),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72\n    },\n    __self: this\n  }, \"Delete\"), React.createElement(\"div\", {\n    className: \"btn table-btn download-btn\",\n    onClick: () => downloadTable(item.invoice_id, item.order_id),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73\n    },\n    __self: this\n  }, \"Download\"), React.createElement(\"div\", {\n    className: \"btn table-btn edit-btn\",\n    onClick: () => editorTable(item.invoice_id),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77\n    },\n    __self: this\n  }, \"Edit\"))))));\n};\n\nTable.prototype = {};\nexport default connect()(Table);","map":{"version":3,"sources":["C:\\Users\\anton\\Desktop\\InvoiceGen\\client\\src\\comp\\invoice\\comp\\table.js"],"names":["React","useState","Fragment","connect","Redirect","Link","Moment","axios","saveAs","Table","invoices","loading","redirect","focus","state","setState","InvoiceTable","get","then","res","data","editorTable","invoice_id","renderRedirect","deleteTable","delete","downloadTable","order_id","responseType","headers","Accept","blob","Blob","type","map","item","_id","created_at","prototype"],"mappings":"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","sourcesContent":["import React, { useState, Fragment } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Redirect, Link } from 'react-router-dom';\r\nimport Moment from 'react-moment';\r\nimport axios from 'axios';\r\nimport { saveAs } from 'file-saver';\r\n\r\nconst Table = () => {\r\n\tconst [state, setState] = useState({\r\n\t\tinvoices: [],\r\n\t\tloading: true,\r\n\t\tredirect: false,\r\n\t\tfocus: ''\r\n\t});\r\n\r\n\tconst InvoiceTable = () => {\r\n\t\taxios.get('/api/invoice').then(res => {\r\n\t\t\tsetState({ ...state, invoices: res.data, loading: false });\r\n\t\t});\r\n\t};\r\n\tconst editorTable = invoice_id => {\r\n\t\tsetState({ ...state, redirect: true, focus: invoice_id });\r\n\t};\r\n\tconst renderRedirect = () => {\r\n\t\tif (state.redirect)\r\n\t\t\treturn <Redirect to={`/invoice/editor/${state.focus}`} />;\r\n\t};\r\n\tconst deleteTable = invoice_id => {\r\n\t\taxios.delete(`/api/invoice/${invoice_id}`);\r\n\t};\r\n\tconst downloadTable = (invoice_id, order_id) => {\r\n\t\taxios\r\n\t\t.get('/api/invoice/pdf/' + invoice_id, {\r\n\t\t\tresponseType: 'arraybuffer',\r\n\t\t\theaders: { Accept: 'application/pdf' }\r\n\t\t})\r\n\t\t.then(res => {\r\n\t\t\tconst blob = new Blob([res.data], { type: 'application/pdf' });\r\n\t\t\tsaveAs(blob, `devotion_proforma_${order_id}.pdf`);\r\n\t\t});\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div className='table-container'>\r\n\t\t\t{InvoiceTable()}\r\n\t\t\t{renderRedirect()}\r\n\t\t\t<Fragment>\r\n\t\t\t\t{state.loading ? (\r\n\t\t\t\t\t<p>Загрузка...</p>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<Fragment>\r\n\t\t\t\t\t\t<div className='outsider'>\r\n\t\t\t\t\t\t\t\t\t<div className='invoice-panel-title'>Invoice panel</div>\r\n\t\t\t<Link to='/creater'><div className='btn btn-create'>Create an invoice</div></Link>\r\n\t\t\t</div>\r\n\t\t\t\t\t\t<div className='table-header'>\r\n\t\t\t\t\t\t\t<div className='table-col-name'>Invoice id</div>\r\n\t\t\t\t\t\t\t<div className='table-col-name'>Order id</div>\r\n\t\t\t\t\t\t\t<div className='table-col-name'>Date</div>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t{state.invoices.map(item => (\r\n\t\t\t\t\t\t\t<div className='table-item' key={item._id}>\r\n\t\t\t\t\t\t\t\t<div className='table-col'>{item.invoice_id}</div>\r\n\t\t\t\t\t\t\t\t<div className='table-col'>{item.order_id}</div>\r\n\t\t\t\t\t\t\t\t<div className='table-col'>\r\n\t\t\t\t\t\t\t\t\t<Moment format=\"DD.MM.YY \">\r\n                \t{item.created_at}\r\n\t\t\t\t\t\t\t\t\t</Moment>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t<div className='btn table-btn delete-btn' onClick={() => deleteTable(item.invoice_id)}>Delete</div>\r\n\t\t\t\t\t\t\t\t<div className='btn table-btn download-btn' onClick={() => downloadTable(item.invoice_id, item.order_id)}>\r\n\t\t\t\t\t\t\t\t\tDownload\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t<div className='btn table-btn edit-btn' onClick={() => editorTable(item.invoice_id)}>Edit</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t\t</Fragment>\r\n\t\t\t\t)}\r\n\t\t\t</Fragment>\r\n\t\t</div>\r\n\t);\r\n};\r\nTable.prototype = {};\r\n\r\nexport default connect()(Table);\r\n"]},"metadata":{},"sourceType":"module"}